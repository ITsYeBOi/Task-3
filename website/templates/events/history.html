{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}

{% block content %}
  <div class="container"> 
    <h1>Your Booking History</h1>
    <!-- Booking History Table -->
    <div class="row mt-3">
      <!-- Table Headers -->
      <div class="col-md-4 col-12"><strong>Event Name</strong></div>
      <div class="col-md-2 col-12"><strong>Booking ID</strong></div>
      <div class="col-md-3 col-12"><strong>Event Date</strong></div>
      <div class="col-md-2 col-12"><strong>Ticket Type</strong></div>
      <div class="col-md-1 col-12"><strong>Actions</strong></div>
    </div>

    <!-- Booking Rows -->
    {% for booking in user_bookings %}
      <div class="row mt-3 flex-md-row flex-column align-items-md-center">
        <div class="col-md-4 col-12">
          {{ booking.event.name }}
        </div>
        <div class="col-md-2 col-12">
          {{ booking.booking_reference }}
        </div>
        <div class="col-md-3 col-12">
          {{ booking.event.date }}
        </div>
        <div class="col-md-2 col-12">
          {{ booking.ticket_type }} ({{ booking.quantity }})
        </div>
        <div class="col-md-1 col-12 text-center">
          <button class="btn btn-primary">Invoice</button>
        </div>
      </div>
    {% else %}
      <div class="row mt-3">
        <div class="col-12">
          <p>No bookings found.</p>
        </div>
      </div>
    {% endfor %}

    <h1>Your Created Events</h1>
  <!-- Events Table -->
  <div class="table-responsive">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Description</th>
          <th>Date</th>
          <th>Status</th>
          <th>Venue</th>
          <th>Image</th>
        </tr>
      </thead>
      <tbody>
        {% for event in user_created_events %}
          <tr>
            <td>{{ event.id }}</td>
            <td>{{ event.name }}</td>
            <td>{{ event.description }}</td>
            <td>{{ event.date }}</td>
            <td>{{ event.status }}</td>
            <td>{{ event.venue }}</td>
            <td>
              {% if event.image %}
                <img src="{{ event.image }}" alt="{{ event.name }}" style="width: 100px; height: auto;">
              {% else %}
                No Image
              {% endif %}
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="7">No events found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
